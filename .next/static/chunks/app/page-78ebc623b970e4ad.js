(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5298:function(e,t,a){Promise.resolve().then(a.bind(a,7653))},7653:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Home}});var r=a(7437),s=a(2265),l=a(7007),n=a(994),i=a(4086),d=a(2601);let o={apiKey:d.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:d.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:d.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:d.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:d.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:d.env.NEXT_PUBLIC_FIREBASE_APP_ID},c=(0,n.ZF)(o),x=(0,i.ad)(c),m=(0,l.v0)(c),u={async getNotes(e){let t=(0,i.IO)((0,i.hJ)(x,"notes"),(0,i.ar)("userId","==",e),(0,i.Xo)("updatedAt","desc")),a=await (0,i.PL)(t);return a.docs.map(e=>({id:e.id,...e.data()}))},async addNote(e){let t=await (0,i.ET)((0,i.hJ)(x,"notes"),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return t.id},async updateNote(e,t){let a=(0,i.JU)(x,"notes",e);await (0,i.r7)(a,{...t,updatedAt:new Date().toISOString()})},async deleteNote(e){await (0,i.oe)((0,i.JU)(x,"notes",e))},subscribeToNotes(e,t){let a=(0,i.IO)((0,i.hJ)(x,"notes"),(0,i.ar)("userId","==",e),(0,i.Xo)("updatedAt","desc"));return(0,i.cf)(a,e=>{let a=e.docs.map(e=>({id:e.id,...e.data()}));t(a)})}},g={async getFolders(e){let t=(0,i.IO)((0,i.hJ)(x,"folders"),(0,i.ar)("userId","==",e),(0,i.Xo)("name")),a=await (0,i.PL)(t);return a.docs.map(e=>({id:e.id,...e.data()}))},async addFolder(e,t){let a=await (0,i.ET)((0,i.hJ)(x,"folders"),{name:e,userId:t,createdAt:new Date().toISOString()});return a.id},async deleteFolder(e){await (0,i.oe)((0,i.JU)(x,"folders",e))}},h={async getTags(e){let t=(0,i.IO)((0,i.hJ)(x,"tags"),(0,i.ar)("userId","==",e),(0,i.Xo)("name")),a=await (0,i.PL)(t);return a.docs.map(e=>({id:e.id,...e.data()}))},async addTag(e,t){let a=await (0,i.ET)((0,i.hJ)(x,"tags"),{name:e,userId:t,createdAt:new Date().toISOString()});return a.id},async deleteTag(e){await (0,i.oe)((0,i.JU)(x,"tags",e))}};function Button(e){let{variant:t="primary",size:a="md",children:s,className:l="",...n}=e;return(0,r.jsx)("button",{className:"".concat("whitespace-nowrap cursor-pointer inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-600 text-white hover:bg-gray-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",ghost:"text-gray-700 hover:bg-gray-100"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[a]," ").concat(l),...n,children:s})}function Header(e){let{user:t,onLogout:a,onToggleTheme:l,isDark:n}=e,[i,d]=(0,s.useState)(!1);return(0,r.jsx)("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white font-pacifico",children:"NotesApp"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:l,className:"w-8 h-8 flex items-center justify-center p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",children:(0,r.jsx)("i",{className:"".concat(n?"ri-sun-line":"ri-moon-line"," text-lg text-gray-600 dark:text-gray-300")})}),t?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>d(!i),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:t.name.charAt(0).toUpperCase()})}),(0,r.jsx)("i",{className:"ri-arrow-down-s-line text-gray-600 dark:text-gray-300"})]}),i&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50",children:[(0,r.jsxs)("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.email})]}),(0,r.jsxs)("button",{onClick:()=>{null==a||a(),d(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",children:[(0,r.jsx)("i",{className:"ri-logout-circle-line mr-2"}),"Sign Out"]})]})]}):(0,r.jsx)(Button,{variant:"primary",size:"sm",children:"Sign In"})]})]})})}function Sidebar(e){let{folders:t,tags:a,selectedFolder:l,selectedTag:n,onFolderSelect:i,onTagSelect:d,onNewNote:o}=e,[c,x]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),[g,h]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),handleCreateFolder=()=>{m.trim()&&(u(""),x(!1))},handleCreateTag=()=>{y.trim()&&(b(""),h(!1))};return(0,r.jsxs)("div",{className:"w-64 bg-gray-50 dark:bg-gray-900/50 border-r border-gray-200 dark:border-gray-700 h-full flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)(Button,{onClick:o,variant:"primary",className:"w-full",children:[(0,r.jsx)("i",{className:"ri-add-line mr-2"}),"New Note"]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wide",children:"Folders"}),(0,r.jsx)("button",{onClick:()=>x(!0),className:"w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600 cursor-pointer",children:(0,r.jsx)("i",{className:"ri-add-line text-sm"})})]}),c&&(0,r.jsxs)("div",{className:"mb-3 p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"Folder name",className:"w-full p-1 text-sm border-none outline-none bg-transparent",onKeyDown:e=>{"Enter"===e.key&&handleCreateFolder(),"Escape"===e.key&&x(!1)},autoFocus:!0}),(0,r.jsxs)("div",{className:"flex justify-end space-x-1 mt-2",children:[(0,r.jsx)("button",{onClick:()=>x(!1),className:"px-2 py-1 text-xs text-gray-500 hover:text-gray-700 cursor-pointer",children:"Cancel"}),(0,r.jsx)("button",{onClick:handleCreateFolder,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded cursor-pointer",children:"Create"})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("button",{onClick:()=>i("all"),className:"w-full flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors ".concat("all"===l?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-file-list-3-line mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:"All Notes"})]}),(0,r.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full",children:t.reduce((e,t)=>e+t.count,0)})]}),t.map(e=>(0,r.jsxs)("button",{onClick:()=>i(e.id),className:"w-full flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors ".concat(l===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-folder-3-line mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:e.name})]}),(0,r.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full",children:e.count})]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wide",children:"Tags"}),(0,r.jsx)("button",{onClick:()=>h(!0),className:"w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600 cursor-pointer",children:(0,r.jsx)("i",{className:"ri-add-line text-sm"})})]}),g&&(0,r.jsxs)("div",{className:"mb-3 p-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),placeholder:"Tag name",className:"w-full p-1 text-sm border-none outline-none bg-transparent",onKeyDown:e=>{"Enter"===e.key&&handleCreateTag(),"Escape"===e.key&&h(!1)},autoFocus:!0}),(0,r.jsxs)("div",{className:"flex justify-end space-x-1 mt-2",children:[(0,r.jsx)("button",{onClick:()=>h(!1),className:"px-2 py-1 text-xs text-gray-500 hover:text-gray-700 cursor-pointer",children:"Cancel"}),(0,r.jsx)("button",{onClick:handleCreateTag,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded cursor-pointer",children:"Create"})]})]}),(0,r.jsx)("div",{className:"space-y-1",children:a.map(e=>(0,r.jsxs)("button",{onClick:()=>d(e.id),className:"w-full flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors ".concat(n===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-price-tag-3-line mr-2"}),(0,r.jsxs)("span",{className:"text-sm",children:["#",e.name]})]}),(0,r.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full",children:e.count})]},e.id))})]})]})})]})}function NotesList(e){let{notes:t,selectedNote:a,onNoteSelect:s,onTogglePin:l,onDeleteNote:n,searchTerm:i}=e,d=t.filter(e=>e.title.toLowerCase().includes(i.toLowerCase())||e.content.toLowerCase().includes(i.toLowerCase())),o=d.filter(e=>e.isPinned),c=d.filter(e=>!e.isPinned),formatDate=e=>{let t=new Date(e),a=new Date,r=Math.abs(a.getTime()-t.getTime()),s=Math.ceil(r/864e5);return 1===s?"Today":2===s?"Yesterday":s<=7?"".concat(s-1," days ago"):t.toLocaleDateString()},renderNote=e=>(0,r.jsxs)("div",{onClick:()=>s(e.id),className:"p-4 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ".concat(a===e.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":""),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isPinned&&(0,r.jsx)("i",{className:"ri-pushpin-fill text-blue-500 text-sm"}),e.isPrivate&&(0,r.jsx)("i",{className:"ri-lock-fill text-yellow-500 text-sm"}),(0,r.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title||"Untitled"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-blue-500 cursor-pointer",children:(0,r.jsx)("i",{className:"".concat(e.isPinned?"ri-pushpin-fill":"ri-pushpin-line"," text-sm")})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500 cursor-pointer",children:(0,r.jsx)("i",{className:"ri-delete-bin-line text-sm"})})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-2",children:e.content||"No content"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs text-gray-600 dark:text-gray-300 rounded-full",children:["#",e]},e))}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:formatDate(e.updatedAt)})]})]},e.id);return(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[o.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"Pinned Notes"})}),(0,r.jsx)("div",{className:"group",children:o.map(renderNote)})]}),c.length>0&&(0,r.jsxs)("div",{children:[o.length>0&&(0,r.jsx)("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"All Notes"})}),(0,r.jsx)("div",{className:"group",children:c.map(renderNote)})]}),0===d.length&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center p-8",children:[(0,r.jsx)("i",{className:"ri-file-text-line text-4xl text-gray-300 dark:text-gray-600 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:i?"No notes found":"No notes yet"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm",children:i?"Try adjusting your search terms or create a new note.":"Create your first note to get started with organizing your thoughts."})]})]})}function Input(e){let{label:t,error:a,className:s="",...l}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,r.jsx)("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(a?"border-red-500":""," ").concat(s),...l}),a&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]})}function AuthModal(e){let{isOpen:t,onClose:a,onAuthSuccess:n}=e,[i,d]=(0,s.useState)(!0),[o,c]=(0,s.useState)({name:"",email:"",password:""}),[x,u]=(0,s.useState)({}),[g,h]=(0,s.useState)(!1);if(!t)return null;let validateForm=()=>{let e={};return o.email?/\S+@\S+\.\S+/.test(o.email)||(e.email="Email is invalid"):e.email="Email is required",o.password?o.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",i||o.name||(e.name="Name is required"),u(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){h(!0),u({});try{if(i)await (0,l.e5)(m,o.email,o.password);else{let e=await (0,l.Xb)(m,o.email,o.password);await (0,l.ck)(e.user,{displayName:o.name})}n(),a()}catch(e){console.error("Auth error:",e),u({general:e.message||"Authentication failed. Please try again."})}finally{h(!1)}}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?"Sign In":"Sign Up"}),(0,r.jsx)("button",{onClick:a,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 cursor-pointer",children:(0,r.jsx)("i",{className:"ri-close-line text-xl"})})]}),x.general&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:x.general})}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[!i&&(0,r.jsx)(Input,{label:"Full Name",type:"text",value:o.name,onChange:e=>c({...o,name:e.target.value}),error:x.name,placeholder:"Enter your full name"}),(0,r.jsx)(Input,{label:"Email",type:"email",value:o.email,onChange:e=>c({...o,email:e.target.value}),error:x.email,placeholder:"Enter your email"}),(0,r.jsx)(Input,{label:"Password",type:"password",value:o.password,onChange:e=>c({...o,password:e.target.value}),error:x.password,placeholder:"Enter your password"}),(0,r.jsx)(Button,{type:"submit",variant:"primary",className:"w-full",disabled:g,children:g?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("i",{className:"ri-loader-4-line animate-spin mr-2"}),i?"Signing In...":"Creating Account..."]}):i?"Sign In":"Create Account"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i?"Don't have an account?":"Already have an account?",(0,r.jsx)("button",{onClick:()=>d(!i),className:"ml-1 text-blue-600 hover:text-blue-700 cursor-pointer font-medium",children:i?"Sign Up":"Sign In"})]})})]})})}function Home(){let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[x,y]=(0,s.useState)(""),[b,p]=(0,s.useState)("all"),[f,N]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[w,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(null),[E,I]=(0,s.useState)(!0),[T,P]=(0,s.useState)(!1),[A,_]=(0,s.useState)([]),[L,D]=(0,s.useState)([]),[F,B]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=(0,l.Aj)(m,async e=>{if(I(!0),e){var t;let a={id:e.uid,name:e.displayName||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"User",email:e.email||""};n(a),d(e),await loadUserData(e.uid)}else n(null),d(null),_([]),D([]),B([]);I(!1)}),a=localStorage.getItem("notesapp_theme");return"dark"===a&&(t(!0),document.documentElement.classList.add("dark")),()=>e()},[]);let loadUserData=async e=>{try{P(!0);let t=u.subscribeToNotes(e,e=>{_(e)}),[a,r]=await Promise.all([g.getFolders(e),h.getTags(e)]);if(0===a.length){await Promise.all([g.addFolder("Personal",e),g.addFolder("Work",e),g.addFolder("Projects",e)]);let t=await g.getFolders(e);D(t.map(e=>({id:e.id,name:e.name,count:0})))}else D(a.map(e=>({id:e.id,name:e.name,count:0})));return B(r.map(e=>({id:e.id,name:e.name,count:0}))),t}catch(e){console.error("Error loading user data:",e)}finally{P(!1)}},handleLogout=async()=>{try{await (0,l.w7)(m)}catch(e){console.error("Error signing out:",e)}},handleToggleTheme=()=>{let a=!e;t(a),a?(document.documentElement.classList.add("dark"),localStorage.setItem("notesapp_theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("notesapp_theme","light"))},handleNewNote=async()=>{if(a)try{P(!0);let e=new Date().toISOString(),t={title:"",content:"",folder:"all"===b?"personal":b,tags:[],isPinned:!1,isPrivate:!1,userId:a.id,createdAt:e,updatedAt:e},r=await u.addNote(t),s={...t,id:r};v(r),C(s),k(!0)}catch(e){console.error("Error creating note:",e)}finally{P(!1)}},handleTogglePin=async e=>{let t=A.find(t=>t.id===e);if(t)try{P(!0),await u.updateNote(e,{isPinned:!t.isPinned})}catch(e){console.error("Error toggling pin:",e)}finally{P(!1)}},handleDeleteNote=async e=>{try{P(!0),await u.deleteNote(e),j===e&&(v(""),C(null))}catch(e){console.error("Error deleting note:",e)}finally{P(!1)}},handleSaveNote=async()=>{if(S)try{P(!0),await u.updateNote(S.id,{title:S.title,content:S.content,folder:S.folder,tags:S.tags,isPinned:S.isPinned,isPrivate:S.isPrivate}),k(!1)}catch(e){console.error("Error saving note:",e)}finally{P(!1)}},U=A.filter(e=>!!(("all"===b||e.folder===b)&&(!f||e.tags.includes(f))&&(!x||e.title.toLowerCase().includes(x.toLowerCase())||e.content.toLowerCase().includes(x.toLowerCase()))));return E?(0,r.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("i",{className:"ri-loader-4-line text-4xl text-blue-600 animate-spin mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your notes..."})]})}):a?(0,r.jsxs)("div",{className:"h-screen bg-white dark:bg-gray-900 flex flex-col",children:[(0,r.jsx)(Header,{user:a,onLogout:handleLogout,onToggleTheme:handleToggleTheme,isDark:e}),T&&(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800 px-4 py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-center text-sm text-blue-600 dark:text-blue-400",children:[(0,r.jsx)("i",{className:"ri-cloud-line animate-pulse mr-2"}),"Syncing with cloud..."]})}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,r.jsx)(Sidebar,{folders:L,tags:F,selectedFolder:b,selectedTag:f,onFolderSelect:p,onTagSelect:N,onNewNote:handleNewNote}),(0,r.jsxs)("div",{className:"flex-1 flex",children:[(0,r.jsxs)("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)(Input,{type:"text",placeholder:"Search notes...",value:x,onChange:e=>y(e.target.value),className:"pl-10 text-sm"})]})}),(0,r.jsx)(NotesList,{notes:U,selectedNote:j,onNoteSelect:e=>{let t=A.find(t=>t.id===e);t&&(v(e),C(t),k(!1))},onTogglePin:handleTogglePin,onDeleteNote:handleDeleteNote,searchTerm:x})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[S.isPinned&&(0,r.jsx)("i",{className:"ri-pushpin-fill text-blue-500"}),S.isPrivate&&(0,r.jsx)("i",{className:"ri-lock-fill text-yellow-500"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date(S.updatedAt).toLocaleDateString()]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Button,{onClick:()=>k(!1),variant:"outline",size:"sm",children:"Cancel"}),(0,r.jsx)(Button,{onClick:handleSaveNote,variant:"primary",size:"sm",children:"Save"})]}):(0,r.jsxs)(Button,{onClick:()=>k(!0),variant:"primary",size:"sm",children:[(0,r.jsx)("i",{className:"ri-edit-line mr-1"}),"Edit"]})})]}),(0,r.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:w?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(Input,{type:"text",value:S.title,onChange:e=>C({...S,title:e.target.value}),placeholder:"Note title...",className:"text-2xl font-bold border-none p-0 focus:ring-0"}),(0,r.jsx)("textarea",{value:S.content,onChange:e=>C({...S,content:e.target.value}),placeholder:"Start writing your note...",className:"w-full h-96 p-0 border-none resize-none focus:outline-none focus:ring-0 text-gray-700 dark:text-gray-300 bg-transparent"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:S.title||"Untitled"}),(0,r.jsx)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:S.content||"No content"})})]})})]}):(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("i",{className:"ri-file-text-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Select a note to view"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Choose a note from the sidebar or create a new one"})]})})})]})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[(0,r.jsx)(Header,{user:a,onLogout:handleLogout,onToggleTheme:handleToggleTheme,isDark:e}),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-80px)] p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("i",{className:"ri-file-text-line text-2xl text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4 font-pacifico",children:"NotesApp"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your secure, organized, and intelligent note-taking companion. Capture ideas, organize thoughts, and boost your productivity with real-time cloud sync."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(Button,{onClick:()=>c(!0),variant:"primary",className:"w-full",children:"Get Started"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-shield-check-line mr-1"}),"Secure"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-cloud-line mr-1"}),"Cloud Sync"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("i",{className:"ri-smartphone-line mr-1"}),"Mobile Ready"]})]})]})]})}),(0,r.jsx)(AuthModal,{isOpen:o,onClose:()=>c(!1),onAuthSuccess:()=>c(!1)})]})}}},function(e){e.O(0,[874,358,598,971,472,744],function(){return e(e.s=5298)}),_N_E=e.O()}]);