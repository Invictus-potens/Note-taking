(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7745:function(e,a,s){Promise.resolve().then(s.bind(s,8123))},8123:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return LoginPage}});var n=s(7437),r=s(2265),l=s(4033),i=s(2445);function LoginPage(){let e=(0,l.useRouter)(),[a,s]=(0,r.useState)(!0),[o,t]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)({name:"",email:"",password:"",confirmPassword:""}),[w,g]=(0,r.useState)({}),validateForm=()=>{let e={};return h.email?/\S+@\S+\.\S+/.test(h.email)||(e.email="Email is invalid"):e.email="Email is required",o||(h.password?h.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",a||h.name||(e.name="Name is required"),a||h.password===h.confirmPassword||(e.confirmPassword="Passwords do not match")),g(e),0===Object.keys(e).length},handleSubmit=async s=>{if(s.preventDefault(),validateForm()){d(!0),g({});try{if(o){let{error:e}=await i.O.auth.resetPasswordForEmail(h.email);if(e)throw e;u(!0)}else if(a){let{error:a}=await i.O.auth.signInWithPassword({email:h.email,password:h.password});if(a)throw a;e.push("/")}else{let{error:a}=await i.O.auth.signUp({email:h.email,password:h.password,options:{data:{name:h.name}}});if(a)throw a;e.push("/")}}catch(e){g({general:e.message||"Authentication failed. Please try again."})}finally{d(!1)}}},handleInputChange=(e,a)=>{p(s=>({...s,[e]:a})),w[e]&&g(a=>({...a,[e]:""}))};return(0,n.jsx)("div",{className:"login-container",children:(0,n.jsxs)("div",{className:"login-card",children:[(0,n.jsxs)("div",{className:"login-header",children:[(0,n.jsx)("h1",{className:"login-title",children:"Scribe"}),(0,n.jsx)("p",{className:"login-subtitle",children:o?"Reset your password":a?"Welcome back":"Create your account"})]}),w.general&&(0,n.jsx)("div",{className:"error-message",children:(0,n.jsx)("p",{children:w.general})}),m?(0,n.jsxs)("div",{className:"success-message",children:[(0,n.jsx)("div",{className:"success-icon",children:"âœ…"}),(0,n.jsx)("h3",{children:"Check your email"}),(0,n.jsxs)("p",{children:["We've sent a password reset link to ",h.email]}),(0,n.jsx)("button",{className:"back-btn",onClick:()=>{t(!1),u(!1),p({name:"",email:"",password:"",confirmPassword:""})},children:"Back to login"})]}):(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"login-form",children:[!a&&!o&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Full Name"}),(0,n.jsx)("input",{type:"text",className:"form-input ".concat(w.name?"error":""),value:h.name,onChange:e=>handleInputChange("name",e.target.value),placeholder:"Enter your full name"}),w.name&&(0,n.jsx)("span",{className:"error-text",children:w.name})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Email"}),(0,n.jsx)("input",{type:"email",className:"form-input ".concat(w.email?"error":""),value:h.email,onChange:e=>handleInputChange("email",e.target.value),placeholder:"Enter your email"}),w.email&&(0,n.jsx)("span",{className:"error-text",children:w.email})]}),!o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Password"}),(0,n.jsx)("input",{type:"password",className:"form-input ".concat(w.password?"error":""),value:h.password,onChange:e=>handleInputChange("password",e.target.value),placeholder:"Enter your password"}),w.password&&(0,n.jsx)("span",{className:"error-text",children:w.password})]}),!a&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",children:"Confirm Password"}),(0,n.jsx)("input",{type:"password",className:"form-input ".concat(w.confirmPassword?"error":""),value:h.confirmPassword,onChange:e=>handleInputChange("confirmPassword",e.target.value),placeholder:"Confirm your password"}),w.confirmPassword&&(0,n.jsx)("span",{className:"error-text",children:w.confirmPassword})]})]}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",disabled:c,children:c?(0,n.jsxs)("div",{className:"loading-spinner",children:[(0,n.jsx)("i",{className:"ri-loader-4-line"}),(0,n.jsx)("span",{children:o?"Sending...":a?"Signing In...":"Creating Account..."})]}):o?"Send Reset Email":a?"Sign In":"Create Account"})]}),(0,n.jsxs)("div",{className:"login-footer",children:[!o&&(0,n.jsx)("button",{className:"link-btn",onClick:()=>t(!0),children:"Forgot your password?"}),o?(0,n.jsx)("button",{className:"link-btn",onClick:()=>{t(!1),u(!1),p({name:"",email:"",password:"",confirmPassword:""})},children:"Back to login"}):(0,n.jsxs)("div",{className:"auth-switch",children:[(0,n.jsx)("span",{children:a?"Don't have an account?":"Already have an account?"}),(0,n.jsx)("button",{className:"link-btn",onClick:()=>{s(!a),p({name:"",email:"",password:"",confirmPassword:""}),g({})},children:a?"Sign Up":"Sign In"})]})]})]})})}},2445:function(e,a,s){"use strict";s.d(a,{O:function(){return o}});var n=s(1492),r=s(2601);let l=r.env.NEXT_PUBLIC_SUPABASE_URL,i=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,n.eI)(l,i)},4033:function(e,a,s){e.exports=s(94)}},function(e){e.O(0,[889,971,472,744],function(){return e(e.s=7745)}),_N_E=e.O()}]);