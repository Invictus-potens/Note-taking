(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9048:function(e,a,t){Promise.resolve().then(t.bind(t,6392))},6392:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Home}});var s=t(7437),i=t(2265),n=t(6233),l=t.n(n),r=t(5187),o=t(7318),d=t(4033);function ProtectedRoute(e){let{children:a}=e,{user:t,loading:n}=(0,o.useAuth)(),l=(0,d.useRouter)();return((0,i.useEffect)(()=>{n||t||l.push("/login")},[t,n,l]),n)?(0,s.jsx)("div",{className:"loading-screen",children:(0,s.jsxs)("div",{className:"loading-spinner",children:[(0,s.jsx)("i",{className:"ri-loader-4-line"}),(0,s.jsx)("span",{children:"Loading..."})]})}):t?(0,s.jsx)(s.Fragment,{children:a}):null}t(7468);var AI_AIAssistant=e=>{let{onAddToNote:a}=e,[t,n]=(0,i.useState)(!1),[l,r]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[c,m]=(0,i.useState)(!1),[u,h]=(0,i.useState)(""),[x,N]=(0,i.useState)([]),[p,j]=(0,i.useState)(!1),g=(0,i.useRef)(null),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=localStorage.getItem("ai-interactions");if(e)try{N(JSON.parse(e))}catch(e){console.error("Error loading AI interactions:",e)}},[]);let saveInteraction=e=>{let a=[e,...x.slice(0,4)];N(a),localStorage.setItem("ai-interactions",JSON.stringify(a))};(0,i.useEffect)(()=>{let handleClickOutside=e=>{g.current&&!g.current.contains(e.target)&&n(!1)};return t&&document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[t]),(0,i.useEffect)(()=>{t&&f.current&&setTimeout(()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.focus()},100)},[t]);let handleSubmit=async e=>{if(e.preventDefault(),l.trim()){m(!0),h(""),d("");try{let e=await fetch("/api/ai-assistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:l.trim()})}),a=await e.json();if(!e.ok)throw Error(a.error||"Failed to get response");d(a.response);let t={id:Date.now().toString(),question:l.trim(),response:a.response,timestamp:a.timestamp};saveInteraction(t)}catch(e){h(e instanceof Error?e.message:"An error occurred")}finally{m(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"ai-assistant-btn",onClick:()=>n(!0),"aria-label":"Open AI Assistant",children:(0,s.jsx)("i",{className:"ri-robot-line"})}),t&&(0,s.jsx)("div",{className:"ai-modal-overlay",children:(0,s.jsxs)("div",{className:"ai-modal",ref:g,children:[(0,s.jsxs)("div",{className:"ai-modal-header",children:[(0,s.jsxs)("div",{className:"ai-modal-title",children:[(0,s.jsx)("i",{className:"ri-robot-line"}),"AI Assistant"]}),(0,s.jsxs)("div",{className:"ai-modal-actions",children:[(0,s.jsx)("button",{className:"ai-history-btn",onClick:()=>j(!p),"aria-label":"Toggle history",children:(0,s.jsx)("i",{className:"ri-history-line"})}),(0,s.jsx)("button",{className:"ai-modal-close",onClick:()=>n(!1),"aria-label":"Close modal",children:(0,s.jsx)("i",{className:"ri-close-line"})})]})]}),(0,s.jsxs)("div",{className:"ai-modal-content",children:[p&&x.length>0&&(0,s.jsxs)("div",{className:"ai-history",children:[(0,s.jsx)("h4",{children:"Recent Interactions"}),x.map(e=>(0,s.jsxs)("div",{className:"ai-history-item",children:[(0,s.jsxs)("div",{className:"ai-history-question",children:[(0,s.jsx)("strong",{children:"Q:"})," ",e.question]}),(0,s.jsxs)("div",{className:"ai-history-response",children:[(0,s.jsx)("strong",{children:"A:"})," ",e.response.substring(0,100),"..."]}),(0,s.jsx)("div",{className:"ai-history-timestamp",children:new Date(e.timestamp).toLocaleString()})]},e.id))]}),(0,s.jsx)("form",{onSubmit:handleSubmit,className:"ai-form",children:(0,s.jsxs)("div",{className:"ai-input-container",children:[(0,s.jsx)("textarea",{ref:f,className:"ai-input",value:l,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&handleSubmit(e)},placeholder:"Ask me anything... (Cmd/Ctrl + Enter to send)",rows:3,disabled:c}),(0,s.jsx)("button",{type:"submit",className:"ai-send-btn",disabled:c||!l.trim(),children:c?(0,s.jsx)("i",{className:"ri-loader-4-line ai-spinner"}):(0,s.jsx)("i",{className:"ri-send-plane-line"})})]})}),u&&(0,s.jsxs)("div",{className:"ai-error",children:[(0,s.jsx)("i",{className:"ri-error-warning-line"}),u]}),o&&(0,s.jsxs)("div",{className:"ai-response",children:[(0,s.jsxs)("div",{className:"ai-response-header",children:[(0,s.jsx)("span",{children:"Response"}),a&&(0,s.jsxs)("button",{className:"ai-add-to-note-btn",onClick:()=>{o&&a&&(a(o),n(!1))},"aria-label":"Add to note",children:[(0,s.jsx)("i",{className:"ri-add-line"}),"Add to Note"]})]}),(0,s.jsx)("div",{className:"ai-response-content",children:o})]})]})]})})]})},c=t(2445);function NotesApp(){let{user:e,signOut:a}=(0,o.useAuth)();(0,d.useRouter)();let[t,n]=(0,i.useState)(!0),[m,u]=(0,i.useState)(""),[h,x]=(0,i.useState)("all"),[N,p]=(0,i.useState)([]),[j,g]=(0,i.useState)(""),[f,v]=(0,i.useState)(!1),[b,C]=(0,i.useState)(null),[S,y]=(0,i.useState)(!1),w=(0,i.useRef)(null),[k,_]=(0,i.useState)(!1),[E,O]=(0,i.useState)(!1),[q,A]=(0,i.useState)(""),[D,T]=(0,i.useState)(""),[P,I]=(0,i.useState)(""),[L,F]=(0,i.useState)([]),[R,U]=(0,i.useState)([]),[H,K]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!e)return;let migrateTagData=async()=>{let{data:a,error:t}=await c.O.from("notes").select("id, tags").eq("user_id",e.id);if(t){console.error("Error fetching notes for migration:",t);return}let{data:s,error:i}=await c.O.from("tags").select("id, name").eq("user_id",e.id);if(i){console.error("Error fetching tags for migration:",i);return}let n=new Map((null==s?void 0:s.map(e=>[e.id,e.name]))||[]);for(let t of a||[]){if(!t.tags||0===t.tags.length)continue;let a=t.tags.some(e=>n.has(e));if(a){let a=t.tags.map(e=>n.get(e)||e),{error:s}=await c.O.from("notes").update({tags:a}).eq("id",t.id).eq("user_id",e.id);s&&console.error("Error migrating note tags:",s)}}},fetchNotes=async()=>{let{data:a,error:t}=await c.O.from("notes").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});!t&&a&&F(a)},fetchFolders=async()=>{let{data:a,error:t}=await c.O.from("folders").select("*").eq("user_id",e.id).order("created_at",{ascending:!0});!t&&a&&U(a)},fetchTags=async()=>{let{data:a,error:t}=await c.O.from("tags").select("*").eq("user_id",e.id).order("created_at",{ascending:!0});!t&&a&&K(a)};migrateTagData().then(()=>{fetchNotes(),fetchFolders(),fetchTags()}),n(!0),document.documentElement.setAttribute("data-theme","dark")},[e]);let handleNewNote=async()=>{if(!e)return;let a={user_id:e.id,title:"",content:"",folder:"all"===h?"personal":h,tags:[],is_pinned:!1,is_private:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:t,error:s}=await c.O.from("notes").insert([a]).select();!s&&t&&t[0]&&(F(e=>[t[0],...e]),g(t[0].id),C(t[0]),v(!0),setTimeout(()=>scrollToNote(t[0].id),100))},handleSaveNote=async()=>{if(!b||!e)return;let a={...b,updated_at:new Date().toISOString()},{data:t,error:s}=await c.O.from("notes").update(a).eq("id",a.id).eq("user_id",e.id).select();!s&&t&&t[0]&&(F(e=>e.map(e=>e.id===a.id?t[0]:e)),v(!1))},handleDeleteNote=async a=>{if(!e)return;let{error:t}=await c.O.from("notes").delete().eq("id",a).eq("user_id",e.id);t||(F(e=>e.filter(e=>e.id!==a)),j===a&&(g(""),C(null)))},handleTogglePin=async a=>{if(!e)return;let t=L.find(e=>e.id===a);if(!t)return;let{data:s,error:i}=await c.O.from("notes").update({is_pinned:!t.is_pinned,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",e.id).select();!i&&s&&s[0]&&F(e=>e.map(e=>e.id===a?s[0]:e))},handleNoteSelect=e=>{let a=L.find(a=>a.id===e);a&&(g(e),C(a),v(!1))},handleCreateFolder=async()=>{if(!q.trim()){I("Nome da pasta n\xe3o pode ser vazio");return}if(!e)return;let a=R.some(e=>e.name.toLowerCase()===q.trim().toLowerCase());if(a){I("Uma pasta com este nome j\xe1 existe");return}let{data:t,error:s}=await c.O.from("folders").insert([{user_id:e.id,name:q.trim()}]).select();!s&&t&&t[0]?(U(e=>[...e,t[0]]),A(""),I(""),_(!1)):(console.error("Erro ao criar pasta:",s),I((null==s?void 0:s.message)||"Erro ao criar pasta"))},handleCreateTag=async()=>{if(!D.trim()){I("Nome da etiqueta n\xe3o pode ser vazio");return}if(!e)return;let a=H.some(e=>e.name.toLowerCase()===D.trim().toLowerCase());if(a){I("Uma etiqueta com este nome j\xe1 existe");return}let{data:t,error:s}=await c.O.from("tags").insert([{user_id:e.id,name:D.trim()}]).select();!s&&t&&t[0]?(K(e=>[...e,t[0]]),T(""),I(""),O(!1)):(console.error("Erro ao criar etiqueta:",s),I((null==s?void 0:s.message)||"Erro ao criar etiqueta"))},handleDeleteFolder=async a=>{if(e)try{let{error:t}=await c.O.from("notes").update({folder:"personal"}).eq("folder",a).eq("user_id",e.id);if(t){console.error("Erro ao mover notas:",t);return}let{error:s}=await c.O.from("folders").delete().eq("id",a).eq("user_id",e.id);if(s){console.error("Erro ao deletar pasta:",s);return}F(e=>e.map(e=>e.folder===a?{...e,folder:"personal"}:e)),U(e=>e.filter(e=>e.id!==a)),h===a&&x("all")}catch(e){console.error("Erro ao deletar pasta:",e)}},handleTagSelect=e=>{let a=H.find(a=>a.id===e);a&&p(e=>e.includes(a.name)?e.filter(e=>e!==a.name):[...e,a.name])},handleDeleteTag=async a=>{if(e)try{let t=H.find(e=>e.id===a);if(!t)return;let{data:s,error:i}=await c.O.from("notes").select("id, tags").eq("user_id",e.id).contains("tags",[t.name]);if(i){console.error("Erro ao buscar notas:",i);return}for(let a of s||[]){let s=a.tags.filter(e=>e!==t.name),{error:i}=await c.O.from("notes").update({tags:s}).eq("id",a.id).eq("user_id",e.id);i&&console.error("Erro ao atualizar nota:",i)}let{error:n}=await c.O.from("tags").delete().eq("id",a).eq("user_id",e.id);if(n){console.error("Erro ao deletar etiqueta:",n);return}F(e=>e.map(e=>({...e,tags:e.tags.filter(e=>e!==t.name)}))),K(e=>e.filter(e=>e.id!==a)),p(e=>e.filter(e=>e!==t.name))}catch(e){console.error("Erro ao deletar etiqueta:",e)}},B=L.filter(e=>!!(("all"===h||e.folder===h)&&(!(N.length>0)||N.every(a=>e.tags.includes(a)))&&(!m||e.title.toLowerCase().includes(m.toLowerCase())||e.content.toLowerCase().includes(m.toLowerCase())))),M=B.filter(e=>e.is_pinned),z=B.filter(e=>!e.is_pinned),formatDate=e=>{let a=new Date(e),t=new Date,s=Math.abs(t.getTime()-a.getTime()),i=Math.ceil(s/864e5);return 1===i?"Hoje":2===i?"Ontem":i<=7?"".concat(i-1," dias atr\xe1s"):a.toLocaleDateString()},handleSignOut=async()=>{await a()},scrollToNote=e=>{if(w.current){let a=w.current.querySelector('[data-note-id="'.concat(e,'"]'));a&&a.scrollIntoView({behavior:"smooth",block:"center"})}},onDragEnd=async a=>{let{source:t,destination:s,draggableId:i}=a;if(s&&(s.droppableId!==t.droppableId||s.index!==t.index)&&(s.droppableId,s.droppableId.startsWith("folder-"))){let a=s.droppableId.replace("folder-",""),{data:t,error:n}=await c.O.from("notes").update({folder:a}).eq("id",i).eq("user_id",null==e?void 0:e.id).select();if(n){console.error("Error updating note folder:",n);return}t&&F(e=>e.map(e=>e.id===i?{...e,folder:a}:e))}},J=R.map(e=>({...e,count:L.filter(a=>a.folder===e.id||a.folder===e.name).length})),Y=H.map(e=>({...e,count:L.filter(a=>a.tags.includes(e.name)).length}));return(0,s.jsx)(r.Z5,{onDragEnd:onDragEnd,children:(0,s.jsxs)("div",{className:"app-container",children:[(0,s.jsxs)("div",{className:"sidebar",children:[(0,s.jsx)("div",{className:"sidebar-header",children:(0,s.jsxs)("button",{className:"new-note-btn",onClick:handleNewNote,children:[(0,s.jsx)("i",{className:"ri-add-line minimalist-icon"}),"Nova Nota"]})}),(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"Pastas"}),(0,s.jsx)("button",{className:"add-btn",onClick:()=>_(!0),"aria-label":"Add new folder",children:(0,s.jsx)("i",{className:"ri-add-line minimalist-icon"})})]}),(0,s.jsxs)("div",{className:"sidebar-item",onClick:()=>x("all"),children:[(0,s.jsxs)("div",{className:"sidebar-item-left",children:[(0,s.jsx)("i",{className:"ri-file-text-line minimalist-icon"}),(0,s.jsx)("span",{children:"Todas as Notas"})]}),(0,s.jsx)("div",{className:"badge",children:L.length})]}),J.map(e=>(0,s.jsxs)("div",{className:"sidebar-item ".concat(h===e.id?"selected":""),onClick:()=>x(e.id),children:[(0,s.jsxs)("div",{className:"sidebar-item-left",children:[(0,s.jsx)("i",{className:"ri-folder-line minimalist-icon"}),(0,s.jsx)("span",{children:e.name})]}),(0,s.jsxs)("div",{className:"sidebar-item-right",children:[(0,s.jsx)("div",{className:"badge",children:e.count}),(0,s.jsx)("button",{className:"delete-btn",onClick:a=>{a.stopPropagation(),handleDeleteFolder(e.id)},"aria-label":"Delete folder ".concat(e.name),children:(0,s.jsx)("i",{className:"ri-delete-bin-line minimalist-icon"})})]})]},e.id)),(0,s.jsxs)("div",{className:"section-header",children:[(0,s.jsx)("div",{className:"section-title",children:"Etiquetas"}),(0,s.jsx)("button",{className:"add-btn",onClick:()=>O(!0),"aria-label":"Add new tag",children:(0,s.jsx)("i",{className:"ri-add-line minimalist-icon"})})]}),Y.map(e=>(0,s.jsxs)("div",{className:"sidebar-item ".concat(N.includes(e.name)?"selected":""),onClick:()=>handleTagSelect(e.id),children:[(0,s.jsxs)("div",{className:"sidebar-item-left",children:[(0,s.jsx)("i",{className:"ri-price-tag-3-line minimalist-icon"}),(0,s.jsxs)("span",{children:["#",e.name]})]}),(0,s.jsxs)("div",{className:"sidebar-item-right",children:[(0,s.jsx)("div",{className:"badge",children:e.count}),(0,s.jsx)("button",{className:"delete-btn",onClick:a=>{a.stopPropagation(),handleDeleteTag(e.id)},"aria-label":"Delete tag ".concat(e.name),children:(0,s.jsx)("i",{className:"ri-delete-bin-line minimalist-icon"})})]})]},e.id))]}),(0,s.jsxs)("div",{className:"main-content-area",children:[(0,s.jsxs)("div",{className:"top-bar",children:[(0,s.jsx)("div",{className:"app-title",children:"Scribe"}),(0,s.jsxs)("div",{className:"top-bar-actions",children:[(0,s.jsx)("div",{className:"user-info",children:(0,s.jsx)("span",{className:"user-email",children:null==e?void 0:e.email})}),(0,s.jsx)("button",{className:"theme-toggle",onClick:()=>{let e=!t;n(e),e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("notesapp_theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("notesapp_theme","light"))},"aria-label":"Toggle theme",children:(0,s.jsx)("i",{className:t?"ri-sun-line":"ri-moon-line"})}),(0,s.jsx)("button",{className:"signout-btn",onClick:handleSignOut,"aria-label":"Sign out",children:(0,s.jsx)("i",{className:"ri-logout-box-line"})})]})]}),(0,s.jsxs)("div",{className:"main-content-columns",style:{display:"flex",flexDirection:"row",height:"100%"},children:[(0,s.jsxs)("div",{className:"middle-column",children:[(0,s.jsx)("div",{className:"search-container",children:(0,s.jsx)("input",{type:"text",className:"search-input",placeholder:"Pesquisar notas...",value:m,onChange:e=>u(e.target.value)})}),(0,s.jsxs)("div",{className:"notes-container",ref:w,onScroll:()=>{if(w.current){let{scrollTop:e}=w.current;y(e>200)}},children:[M.length>0&&(0,s.jsxs)("div",{className:"notes-section",children:[(0,s.jsx)("div",{className:"notes-section-title",children:"Notas Fixadas"}),M.map(e=>(0,s.jsxs)("div",{"data-note-id":e.id,className:"note-card ".concat(j===e.id?"selected":""),onClick:()=>handleNoteSelect(e.id),children:[(0,s.jsxs)("div",{className:"note-header",children:[(0,s.jsx)("div",{className:"note-title",children:e.title||"Sem t\xedtulo"}),(0,s.jsx)("div",{className:"note-date",children:formatDate(e.updated_at)})]}),(0,s.jsx)("div",{className:"note-preview",children:e.content}),e.tags.length>0&&(0,s.jsx)("div",{className:"note-tags",children:e.tags.map(e=>(0,s.jsxs)("span",{className:"tag-pill",children:["#",e]},e))}),(0,s.jsxs)("div",{className:"note-actions",children:[(0,s.jsx)("button",{className:"action-btn",onClick:a=>{a.stopPropagation(),handleTogglePin(e.id)},"aria-label":e.is_pinned?"Unpin note":"Pin note",children:(0,s.jsx)("i",{className:"ri-pushpin-fill minimalist-icon"})}),(0,s.jsx)("button",{className:"action-btn",onClick:a=>{a.stopPropagation(),handleDeleteNote(e.id)},"aria-label":"Delete note",children:(0,s.jsx)("i",{className:"ri-delete-bin-line minimalist-icon"})})]})]},e.id))]}),(0,s.jsxs)("div",{className:"notes-section",children:[(0,s.jsx)("div",{className:"notes-section-title",children:"Todas as Notas"}),z.map(e=>(0,s.jsxs)("div",{"data-note-id":e.id,className:"note-card ".concat(j===e.id?"selected":""),onClick:()=>handleNoteSelect(e.id),children:[(0,s.jsxs)("div",{className:"note-header",children:[(0,s.jsx)("div",{className:"note-title",children:e.title||"Sem t\xedtulo"}),(0,s.jsx)("div",{className:"note-date",children:formatDate(e.updated_at)})]}),(0,s.jsx)("div",{className:"note-preview",children:e.content}),e.tags.length>0&&(0,s.jsx)("div",{className:"note-tags",children:e.tags.map(e=>(0,s.jsxs)("span",{className:"tag-pill",children:["#",e]},e))}),(0,s.jsxs)("div",{className:"note-actions",children:[(0,s.jsx)("button",{className:"action-btn",onClick:a=>{a.stopPropagation(),handleTogglePin(e.id)},"aria-label":e.is_pinned?"Unpin note":"Pin note",children:(0,s.jsx)("i",{className:"ri-pushpin-fill minimalist-icon"})}),(0,s.jsx)("button",{className:"action-btn",onClick:a=>{a.stopPropagation(),handleDeleteNote(e.id)},"aria-label":"Delete note",children:(0,s.jsx)("i",{className:"ri-delete-bin-line minimalist-icon"})})]})]},e.id))]}),S&&(0,s.jsx)("button",{className:"scroll-to-top-btn",onClick:()=>{w.current&&w.current.scrollTo({top:0,behavior:"smooth"})},"aria-label":"Scroll to top",children:(0,s.jsx)("i",{className:"ri-arrow-up-line"})})]})]}),(0,s.jsx)("div",{className:"right-pane",children:b?(0,s.jsxs)("div",{className:"note-editor",children:[(0,s.jsxs)("div",{className:"editor-header",children:[(0,s.jsx)("div",{className:"editor-title",children:"Editor de Notas"}),(0,s.jsx)("div",{className:"editor-actions",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"editor-btn",onClick:()=>{v(!1);let e=L.find(e=>e.id===(null==b?void 0:b.id));e&&C(e)},children:"Cancelar"}),(0,s.jsx)("button",{className:"editor-btn primary",onClick:handleSaveNote,children:"Salvar"})]}):(0,s.jsx)("button",{className:"editor-btn primary",onClick:()=>v(!0),children:"Editar"})})]}),(0,s.jsx)("div",{className:"editor-content",style:{maxHeight:"60vh",overflowY:"auto"},children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",className:"editor-input",value:b.title,onChange:e=>C({...b,title:e.target.value}),placeholder:"T\xedtulo da nota..."}),(0,s.jsx)(l(),{value:b.content,onChange:e=>C({...b,content:e}),placeholder:"Comece a escrever sua nota...",style:{height:"40vh",display:"flex",flexDirection:"column"},modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]}}),(0,s.jsxs)("div",{className:"editor-tags",children:[(0,s.jsx)("div",{className:"editor-tags-label",children:"Etiquetas:"}),(0,s.jsxs)("div",{className:"editor-tags-list",children:[0===H.length&&(0,s.jsx)("span",{className:"editor-tags-empty",children:"Nenhuma etiqueta criada ainda."}),H.map(e=>(0,s.jsx)("button",{type:"button",className:"tag-pill editor-tag-btn".concat(b.tags.includes(e.name)?" selected":""),onClick:()=>{b.tags.includes(e.name)?C({...b,tags:b.tags.filter(a=>a!==e.name)}):C({...b,tags:[...b.tags,e.name]})},children:e.name},e.id))]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"editor-input",children:b.title||"Sem t\xedtulo"}),(0,s.jsx)("div",{className:"editor-textarea",style:{whiteSpace:"pre-wrap",maxHeight:"40vh",overflowY:"auto"},dangerouslySetInnerHTML:{__html:b.content||"Sem conte\xfado"}}),b.tags.length>0&&(0,s.jsx)("div",{className:"note-tags",style:{marginTop:"16px"},children:b.tags.map(e=>(0,s.jsxs)("span",{className:"tag-pill",children:["#",e]},e))})]})})]}):(0,s.jsxs)("div",{className:"empty-state",children:[(0,s.jsx)("div",{className:"empty-icon",children:"\uD83D\uDCDD"}),(0,s.jsx)("div",{className:"empty-title",children:"Editor de Notas"}),(0,s.jsx)("div",{className:"empty-subtitle"})]})})]})]}),k&&(0,s.jsx)("div",{className:"modal-overlay",onClick:()=>_(!1),children:(0,s.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h3",{children:"Criar Nova Pasta"}),(0,s.jsx)("button",{className:"modal-close",onClick:()=>_(!1),"aria-label":"Close modal",children:(0,s.jsx)("i",{className:"ri-close-line"})})]}),(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("input",{type:"text",className:"modal-input",placeholder:"Digite o nome da pasta...",value:q,onChange:e=>A(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleCreateFolder(),autoFocus:!0}),P&&(0,s.jsx)("div",{className:"modal-error",children:P})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{className:"modal-btn",onClick:()=>_(!1),children:"Cancelar"}),(0,s.jsx)("button",{className:"modal-btn primary",onClick:handleCreateFolder,children:"Criar"})]})]})}),E&&(0,s.jsx)("div",{className:"modal-overlay",onClick:()=>O(!1),children:(0,s.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h3",{children:"Criar Nova Etiqueta"}),(0,s.jsx)("button",{className:"modal-close",onClick:()=>O(!1),"aria-label":"Close modal",children:(0,s.jsx)("i",{className:"ri-close-line"})})]}),(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("input",{type:"text",className:"modal-input",placeholder:"Digite o nome da etiqueta...",value:D,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleCreateTag(),autoFocus:!0}),P&&(0,s.jsx)("div",{className:"modal-error",children:P})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{className:"modal-btn",onClick:()=>O(!1),children:"Cancelar"}),(0,s.jsx)("button",{className:"modal-btn primary",onClick:handleCreateTag,children:"Criar"})]})]})}),(0,s.jsx)(AI_AIAssistant,{onAddToNote:e=>{b?(C({...b,content:b.content+"\n\n"+e}),v(!0)):(handleNewNote(),setTimeout(()=>{let a=L.find(e=>e.id===j);a&&C({...a,content:e,title:"AI Response"})},200))}})]})})}function Home(){return(0,s.jsx)(ProtectedRoute,{children:(0,s.jsx)(NotesApp,{})})}},7318:function(e,a,t){"use strict";t.r(a),t.d(a,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=t(7437),i=t(2265),n=t(2445);let l=(0,i.createContext)(void 0);function AuthProvider(e){let{children:a}=e,[t,r]=(0,i.useState)(null),[o,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(!0);(0,i.useEffect)(()=>{n.O.auth.getSession().then(e=>{var a;let{data:{session:t}}=e;d(t),r(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),m(!1)});let{data:{subscription:e}}=n.O.auth.onAuthStateChange((e,a)=>{var t;d(a),r(null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null),m(!1)});return()=>e.unsubscribe()},[]);let signOut=async()=>{await n.O.auth.signOut()};return(0,s.jsx)(l.Provider,{value:{user:t,session:o,loading:c,signOut},children:a})}function useAuth(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2445:function(e,a,t){"use strict";t.d(a,{O:function(){return r}});var s=t(1492),i=t(2601);let n=i.env.NEXT_PUBLIC_SUPABASE_URL,l=i.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,r=(0,s.eI)(n,l)}},function(e){e.O(0,[216,70,889,142,971,472,744],function(){return e(e.s=9048)}),_N_E=e.O()}]);