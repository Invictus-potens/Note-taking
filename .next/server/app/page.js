(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6285:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=s(7096),i=s(6132),l=s(7284),n=s.n(l),r=s(2564),d={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);s.d(t,d);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3982)),"C:\\Users\\felip\\Desktop\\Note-taking\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2498)),"C:\\Users\\felip\\Desktop\\Note-taking\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,8196)),"C:\\Users\\felip\\Desktop\\Note-taking\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\felip\\Desktop\\Note-taking\\app\\page.tsx"],m="/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3120:(e,t,s)=>{Promise.resolve().then(s.bind(s,6377))},6377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var a=s(784),i=s(9885),l=s(4563),n=s(7114);function ProtectedRoute({children:e}){let{user:t,loading:s}=(0,l.useAuth)(),r=(0,n.useRouter)();return((0,i.useEffect)(()=>{s||t||r.push("/login")},[t,s,r]),s)?a.jsx("div",{className:"loading-screen",children:(0,a.jsxs)("div",{className:"loading-spinner",children:[a.jsx("i",{className:"ri-loader-4-line"}),a.jsx("span",{children:"Loading..."})]})}):t?a.jsx(a.Fragment,{children:e}):null}var r=s(6568);function NotesApp(){let{user:e,signOut:t}=(0,l.useAuth)(),s=(0,n.useRouter)(),[d,o]=(0,i.useState)(!0),[c,m]=(0,i.useState)(""),[h,u]=(0,i.useState)("all"),[p,x]=(0,i.useState)([]),[g,N]=(0,i.useState)(""),[j,v]=(0,i.useState)(!1),[f,b]=(0,i.useState)(null),[C,y]=(0,i.useState)(!1),[_,k]=(0,i.useState)(!1),[w,D]=(0,i.useState)(""),[S,P]=(0,i.useState)(""),[q,T]=(0,i.useState)(""),[F,A]=(0,i.useState)([]),[E,O]=(0,i.useState)([]),[L,U]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!e)return;let fetchNotes=async()=>{let{data:t,error:s}=await r.O.from("notes").select("*").eq("user_id",e.id).order("updated_at",{ascending:!1});!s&&t&&A(t)},fetchFolders=async()=>{let{data:t,error:s}=await r.O.from("folders").select("*").eq("user_id",e.id).order("created_at",{ascending:!0});!s&&t&&O(t)},fetchTags=async()=>{let{data:t,error:s}=await r.O.from("tags").select("*").eq("user_id",e.id).order("created_at",{ascending:!0});!s&&t&&U(t)};fetchNotes(),fetchFolders(),fetchTags(),o(!0),document.documentElement.setAttribute("data-theme","dark")},[e]);let handleNewNote=async()=>{if(!e)return;let t={user_id:e.id,title:"",content:"",folder:"all"===h?"personal":h,tags:[],is_pinned:!1,is_private:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:s,error:a}=await r.O.from("notes").insert([t]).select();!a&&s&&s[0]&&(A(e=>[s[0],...e]),N(s[0].id),b(s[0]),v(!0))},handleSaveNote=async()=>{if(!f||!e)return;let t={...f,updated_at:new Date().toISOString()},{data:s,error:a}=await r.O.from("notes").update(t).eq("id",t.id).eq("user_id",e.id).select();!a&&s&&s[0]&&(A(e=>e.map(e=>e.id===t.id?s[0]:e)),v(!1))},handleDeleteNote=async t=>{if(!e)return;let{error:s}=await r.O.from("notes").delete().eq("id",t).eq("user_id",e.id);s||(A(e=>e.filter(e=>e.id!==t)),g===t&&(N(""),b(null)))},handleTogglePin=async t=>{if(!e)return;let s=F.find(e=>e.id===t);if(!s)return;let{data:a,error:i}=await r.O.from("notes").update({is_pinned:!s.is_pinned,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",e.id).select();!i&&a&&a[0]&&A(e=>e.map(e=>e.id===t?a[0]:e))},handleNoteSelect=e=>{let t=F.find(t=>t.id===e);t&&(N(e),b(t),v(!1))},handleCreateFolder=async()=>{if(!w.trim()){T("Folder name cannot be empty");return}if(!e)return;let t=E.some(e=>e.name.toLowerCase()===w.trim().toLowerCase());if(t){T("A folder with this name already exists");return}let{data:s,error:a}=await r.O.from("folders").insert([{user_id:e.id,name:w.trim()}]).select();!a&&s&&s[0]?(O(e=>[...e,s[0]]),D(""),T(""),y(!1)):(console.error("Folder creation error:",a),T(a?.message||"Failed to create folder"))},handleCreateTag=async()=>{if(!S.trim()){T("Tag name cannot be empty");return}if(!e)return;let t=L.some(e=>e.name.toLowerCase()===S.trim().toLowerCase());if(t){T("A tag with this name already exists");return}let{data:s,error:a}=await r.O.from("tags").insert([{user_id:e.id,name:S.trim()}]).select();!a&&s&&s[0]?(U(e=>[...e,s[0]]),P(""),T(""),k(!1)):(console.error("Tag creation error:",a),T(a?.message||"Failed to create tag"))},handleDeleteFolder=e=>{A(t=>t.map(t=>t.folder===e?{...t,folder:"personal"}:t)),O(t=>t.filter(t=>t.id!==e)),h===e&&u("all")},handleTagSelect=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},handleDeleteTag=e=>{A(t=>t.map(t=>({...t,tags:t.tags.filter(t=>t!==e)}))),U(t=>t.filter(t=>t.id!==e)),x(t=>t.filter(t=>t!==e))},$=F.filter(e=>!!(("all"===h||e.folder===h)&&(!(p.length>0)||p.every(t=>e.tags.includes(t)))&&(!c||e.title.toLowerCase().includes(c.toLowerCase())||e.content.toLowerCase().includes(c.toLowerCase())))),H=$.filter(e=>e.is_pinned),I=$.filter(e=>!e.is_pinned),formatDate=e=>{let t=new Date(e),s=new Date,a=Math.abs(s.getTime()-t.getTime()),i=Math.ceil(a/864e5);return 1===i?"Today":2===i?"Yesterday":i<=7?`${i-1} days ago`:t.toLocaleDateString()},handleSignOut=async()=>{await t()},M=E.map(e=>({...e,count:F.filter(t=>t.folder===e.id||t.folder===e.name).length})),G=L.map(e=>({...e,count:F.filter(t=>t.tags.includes(e.name)).length}));return(0,a.jsxs)("div",{className:"app-container",children:[(0,a.jsxs)("div",{className:"sidebar",children:[a.jsx("div",{className:"sidebar-header",children:(0,a.jsxs)("button",{className:"new-note-btn",onClick:handleNewNote,children:[a.jsx("i",{className:"ri-add-line minimalist-icon",children:"+"}),"New Note"]})}),(0,a.jsxs)("div",{className:"section-header",children:[a.jsx("div",{className:"section-title",children:"Folders"}),a.jsx("button",{className:"add-btn",onClick:()=>y(!0),"aria-label":"Add new folder",children:a.jsx("i",{className:"ri-add-line minimalist-icon",children:"+"})})]}),(0,a.jsxs)("div",{className:"sidebar-item",onClick:()=>u("all"),children:[(0,a.jsxs)("div",{className:"sidebar-item-left",children:[a.jsx("i",{className:"ri-file-text-line minimalist-icon",children:"\uD83D\uDDD2️"}),a.jsx("span",{children:"All Notes"})]}),a.jsx("div",{className:"badge",children:F.length})]}),M.map(e=>(0,a.jsxs)("div",{className:`sidebar-item ${h===e.id?"selected":""}`,onClick:()=>u(e.id),children:[(0,a.jsxs)("div",{className:"sidebar-item-left",children:[a.jsx("i",{className:"ri-folder-line minimalist-icon",children:"▣"}),a.jsx("span",{children:e.name})]}),(0,a.jsxs)("div",{className:"sidebar-item-right",children:[a.jsx("div",{className:"badge",children:e.count}),a.jsx("button",{className:"delete-btn",onClick:t=>{t.stopPropagation(),handleDeleteFolder(e.id)},"aria-label":`Delete folder ${e.name}`,children:a.jsx("i",{className:"ri-delete-bin-line minimalist-icon",children:"✕"})})]})]},e.id)),(0,a.jsxs)("div",{className:"section-header",children:[a.jsx("div",{className:"section-title",children:"Tags"}),a.jsx("button",{className:"add-btn",onClick:()=>k(!0),"aria-label":"Add new tag",children:a.jsx("i",{className:"ri-add-line minimalist-icon",children:"+"})})]}),G.map(e=>(0,a.jsxs)("div",{className:`sidebar-item ${p.includes(e.id)?"selected":""}`,onClick:()=>handleTagSelect(e.id),children:[(0,a.jsxs)("div",{className:"sidebar-item-left",children:[a.jsx("i",{className:"ri-price-tag-3-line minimalist-icon",children:"#"}),(0,a.jsxs)("span",{children:["#",e.name]})]}),(0,a.jsxs)("div",{className:"sidebar-item-right",children:[a.jsx("div",{className:"badge",children:e.count}),a.jsx("button",{className:"delete-btn",onClick:t=>{t.stopPropagation(),handleDeleteTag(e.id)},"aria-label":`Delete tag ${e.name}`,children:a.jsx("i",{className:"ri-delete-bin-line minimalist-icon",children:"✕"})})]})]},e.id))]}),(0,a.jsxs)("div",{className:"main-content-area",children:[(0,a.jsxs)("div",{className:"top-bar",children:[a.jsx("div",{className:"app-title",children:"NotesApp"}),(0,a.jsxs)("div",{className:"top-bar-actions",children:[a.jsx("div",{className:"user-info",children:a.jsx("span",{className:"user-email",children:e?.email})}),a.jsx("button",{className:"theme-toggle",onClick:()=>{let e=!d;o(e),e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("notesapp_theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("notesapp_theme","light"))},"aria-label":"Toggle theme",children:a.jsx("i",{className:d?"ri-sun-line":"ri-moon-line"})}),a.jsx("button",{className:"calendar-btn",onClick:()=>{s.push("/calendar")},"aria-label":"Go to calendar",style:{marginLeft:"8px"},children:a.jsx("i",{className:"ri-calendar-line"})}),a.jsx("button",{className:"signout-btn",onClick:handleSignOut,"aria-label":"Sign out",children:a.jsx("i",{className:"ri-logout-box-line"})})]})]}),(0,a.jsxs)("div",{className:"main-content-columns",style:{display:"flex",flexDirection:"row",height:"100%"},children:[(0,a.jsxs)("div",{className:"middle-column",children:[a.jsx("div",{className:"search-container",children:a.jsx("input",{type:"text",className:"search-input",placeholder:"Search notes...",value:c,onChange:e=>m(e.target.value)})}),(0,a.jsxs)("div",{className:"notes-container",children:[H.length>0&&(0,a.jsxs)("div",{className:"notes-section",children:[a.jsx("div",{className:"notes-section-title",children:"Pinned Notes"}),H.map(e=>(0,a.jsxs)("div",{className:`note-card ${g===e.id?"selected":""}`,onClick:()=>handleNoteSelect(e.id),children:[(0,a.jsxs)("div",{className:"note-header",children:[a.jsx("div",{className:"note-title",children:e.title||"Untitled"}),a.jsx("div",{className:"note-date",children:formatDate(e.updated_at)})]}),a.jsx("div",{className:"note-preview",children:e.content}),e.tags.length>0&&a.jsx("div",{className:"note-tags",children:e.tags.map(e=>(0,a.jsxs)("span",{className:"tag-pill",children:["#",e]},e))}),(0,a.jsxs)("div",{className:"note-actions",children:[a.jsx("button",{className:"action-btn",onClick:t=>{t.stopPropagation(),handleTogglePin(e.id)},"aria-label":e.is_pinned?"Unpin note":"Pin note",children:a.jsx("i",{className:"ri-pushpin-fill minimalist-icon",children:"\uD83D\uDCCC"})}),a.jsx("button",{className:"action-btn",onClick:t=>{t.stopPropagation(),handleDeleteNote(e.id)},"aria-label":"Delete note",children:a.jsx("i",{className:"ri-delete-bin-line minimalist-icon",children:"✕"})})]})]},e.id))]}),(0,a.jsxs)("div",{className:"notes-section",children:[a.jsx("div",{className:"notes-section-title",children:"All Notes"}),I.map(e=>(0,a.jsxs)("div",{className:`note-card ${g===e.id?"selected":""}`,onClick:()=>handleNoteSelect(e.id),children:[(0,a.jsxs)("div",{className:"note-header",children:[a.jsx("div",{className:"note-title",children:e.title||"Untitled"}),a.jsx("div",{className:"note-date",children:formatDate(e.updated_at)})]}),a.jsx("div",{className:"note-preview",children:e.content}),e.tags.length>0&&a.jsx("div",{className:"note-tags",children:e.tags.map(e=>{let t=L.find(t=>t.id===e);return t?(0,a.jsxs)("span",{className:"tag-pill",children:["#",t.name]},e):null})}),(0,a.jsxs)("div",{className:"note-actions",children:[a.jsx("button",{className:"action-btn",onClick:t=>{t.stopPropagation(),handleTogglePin(e.id)},"aria-label":e.is_pinned?"Unpin note":"Pin note",children:a.jsx("i",{className:"ri-pushpin-fill minimalist-icon",children:"\uD83D\uDCCC"})}),a.jsx("button",{className:"action-btn",onClick:t=>{t.stopPropagation(),handleDeleteNote(e.id)},"aria-label":"Delete note",children:a.jsx("i",{className:"ri-delete-bin-line minimalist-icon",children:"✕"})})]})]},e.id))]})]})]}),a.jsx("div",{className:"right-pane",children:f?(0,a.jsxs)("div",{className:"note-editor",children:[(0,a.jsxs)("div",{className:"editor-header",children:[a.jsx("div",{className:"editor-title",children:"Note Editor"}),a.jsx("div",{className:"editor-actions",children:j?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{className:"editor-btn",onClick:()=>{v(!1);let e=F.find(e=>e.id===f?.id);e&&b(e)},children:"Cancel"}),a.jsx("button",{className:"editor-btn primary",onClick:handleSaveNote,children:"Save"})]}):a.jsx("button",{className:"editor-btn primary",onClick:()=>v(!0),children:"Edit"})})]}),a.jsx("div",{className:"editor-content",style:{maxHeight:"60vh",overflowY:"auto"},children:j?(0,a.jsxs)(a.Fragment,{children:[a.jsx("input",{type:"text",className:"editor-input",value:f.title,onChange:e=>b({...f,title:e.target.value}),placeholder:"Note title..."}),a.jsx("textarea",{className:"editor-textarea",value:f.content,onChange:e=>b({...f,content:e.target.value}),placeholder:"Start writing your note...",style:{minHeight:"200px",maxHeight:"40vh",overflowY:"auto"}}),(0,a.jsxs)("div",{className:"editor-tags",children:[a.jsx("div",{className:"editor-tags-label",children:"Tags:"}),(0,a.jsxs)("div",{className:"editor-tags-list",children:[0===L.length&&a.jsx("span",{className:"editor-tags-empty",children:"No tags created yet."}),L.map(e=>(0,a.jsxs)("button",{type:"button",className:`tag-pill editor-tag-btn${f.tags.includes(e.id)?" selected":""}`,onClick:()=>{f.tags.includes(e.id)?b({...f,tags:f.tags.filter(t=>t!==e.id)}):b({...f,tags:[...f.tags,e.id]})},children:["#",e.name]},e.id))]})]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("h1",{className:"editor-input",children:f.title||"Untitled"}),a.jsx("div",{className:"editor-textarea",style:{whiteSpace:"pre-wrap",maxHeight:"40vh",overflowY:"auto"},children:f.content||"No content"}),f.tags.length>0&&a.jsx("div",{className:"note-tags",style:{marginTop:"16px"},children:f.tags.map(e=>{let t=L.find(t=>t.id===e);return t?(0,a.jsxs)("span",{className:"tag-pill",children:["#",t.name]},t.id):null})})]})})]}):(0,a.jsxs)("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:"\uD83D\uDCDD"}),a.jsx("div",{className:"empty-title",children:"Note Editor"}),a.jsx("div",{className:"empty-subtitle",children:"Note editing functionality will be implemented here"})]})})]})]}),C&&a.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:(0,a.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"modal-header",children:[a.jsx("h3",{children:"Create New Folder"}),a.jsx("button",{className:"modal-close",onClick:()=>y(!1),"aria-label":"Close modal",children:a.jsx("i",{className:"ri-close-line"})})]}),(0,a.jsxs)("div",{className:"modal-content",children:[a.jsx("input",{type:"text",className:"modal-input",placeholder:"Enter folder name...",value:w,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleCreateFolder(),autoFocus:!0}),q&&a.jsx("div",{className:"modal-error",children:q})]}),(0,a.jsxs)("div",{className:"modal-actions",children:[a.jsx("button",{className:"modal-btn",onClick:()=>y(!1),children:"Cancel"}),a.jsx("button",{className:"modal-btn primary",onClick:handleCreateFolder,children:"Create"})]})]})}),_&&a.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:(0,a.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"modal-header",children:[a.jsx("h3",{children:"Create New Tag"}),a.jsx("button",{className:"modal-close",onClick:()=>k(!1),"aria-label":"Close modal",children:a.jsx("i",{className:"ri-close-line"})})]}),(0,a.jsxs)("div",{className:"modal-content",children:[a.jsx("input",{type:"text",className:"modal-input",placeholder:"Enter tag name...",value:S,onChange:e=>P(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleCreateTag(),autoFocus:!0}),q&&a.jsx("div",{className:"modal-error",children:q})]}),(0,a.jsxs)("div",{className:"modal-actions",children:[a.jsx("button",{className:"modal-btn",onClick:()=>k(!1),children:"Cancel"}),a.jsx("button",{className:"modal-btn primary",onClick:handleCreateTag,children:"Create"})]})]})})]})}function Home(){return a.jsx(ProtectedRoute,{children:a.jsx(NotesApp,{})})}},3982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var a=s(5153);let i=(0,a.createProxy)(String.raw`C:\Users\felip\Desktop\Note-taking\app\page.tsx`),{__esModule:l,$$typeof:n}=i,r=i.default,d=r},7114:(e,t,s)=>{e.exports=s(4979)}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[162,569],()=>__webpack_exec__(6285));module.exports=s})();